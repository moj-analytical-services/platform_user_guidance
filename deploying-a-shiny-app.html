<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Platform Guidance</title>
  <meta name="description" content="This repository contains user guidance for the Analytical Platform.">
  <meta name="generator" content="bookdown 0.5.10 and GitBook 2.6.7">

  <meta property="og:title" content="Platform Guidance" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This repository contains user guidance for the Analytical Platform." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Platform Guidance" />
  
  <meta name="twitter:description" content="This repository contains user guidance for the Analytical Platform." />
  

<meta name="author" content="MoJ Analytical Services">


<meta name="date" content="2017-11-30">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html">
<link rel="next" href="deploying-a-static-web-app.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this guidance</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#platform-is-in-early-development"><i class="fa fa-check"></i>Platform is in early development</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="quick-start.html"><a href="quick-start.html"><i class="fa fa-check"></i><b>1</b> Quick Start</a><ul>
<li class="chapter" data-level="1.1" data-path="quick-start.html"><a href="quick-start.html#what-is-the-analytical-platform"><i class="fa fa-check"></i><b>1.1</b> What is the Analytical Platform?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="quick-start.html"><a href="quick-start.html#links-to-components-of-the-analytical-platform"><i class="fa fa-check"></i><b>1.1.1</b>  Links to components of the Analytical Platform</a></li>
<li class="chapter" data-level="1.1.2" data-path="quick-start.html"><a href="quick-start.html#high-level-diagram-of-the-platform"><i class="fa fa-check"></i><b>1.1.2</b>  High level diagram of the platform:</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="quick-start.html"><a href="quick-start.html#why-should-i-use-the-analytical-platform"><i class="fa fa-check"></i><b>1.2</b> Why should I use the Analytical Platform?</a></li>
<li class="chapter" data-level="1.3" data-path="quick-start.html"><a href="quick-start.html#faq-how-do-i"><i class="fa fa-check"></i><b>1.3</b> FAQ: How do I?</a></li>
<li class="chapter" data-level="1.4" data-path="quick-start.html"><a href="quick-start.html#contacting-us"><i class="fa fa-check"></i><b>1.4</b> Contacting us</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#getting-an-account"><i class="fa fa-check"></i><b>2.1</b> Getting an account</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started.html"><a href="getting-started.html#sign-up-for-github"><i class="fa fa-check"></i><b>2.1.1</b> Sign up for github</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started.html"><a href="getting-started.html#enable-two-factor-authentication-on-your-github-account"><i class="fa fa-check"></i><b>2.1.2</b> Enable two-factor authentication on your Github account</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-started.html"><a href="getting-started.html#email-us-your-github-username"><i class="fa fa-check"></i><b>2.1.3</b> Email us your Github username</a></li>
<li class="chapter" data-level="2.1.4" data-path="getting-started.html"><a href="getting-started.html#read-the-security-operating-procedure"><i class="fa fa-check"></i><b>2.1.4</b> Read the Security Operating Procedure</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#accessing-your-platform-instance"><i class="fa fa-check"></i><b>2.2</b> Accessing your platform instance</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#configuring-git-and-github-for-use-on-the-analytical-platform"><i class="fa fa-check"></i><b>2.3</b> Configuring Git and Github for use on the Analytical Platform</a><ul>
<li class="chapter" data-level="2.3.1" data-path="getting-started.html"><a href="getting-started.html#instructions"><i class="fa fa-check"></i><b>2.3.1</b> Instructions</a></li>
<li class="chapter" data-level="2.3.2" data-path="getting-started.html"><a href="getting-started.html#git-training-resources"><i class="fa fa-check"></i><b>2.3.2</b> Git training resources</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="getting-started.html"><a href="getting-started.html#guidance-on-writing-code"><i class="fa fa-check"></i><b>2.4</b> Guidance on writing code</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started.html"><a href="getting-started.html#training-resources"><i class="fa fa-check"></i><b>2.5</b> Training Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><i class="fa fa-check"></i><b>3</b> Working with big datasets and sharing them: Accessing data in Amazon S3</a><ul>
<li class="chapter" data-level="3.1" data-path="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html#importing-data-from-s3-into-r"><i class="fa fa-check"></i><b>3.1</b> Importing data from S3 into R</a><ul>
<li class="chapter" data-level="3.1.1" data-path="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html#user-interface"><i class="fa fa-check"></i><b>3.1.1</b> User Interface</a></li>
<li class="chapter" data-level="3.1.2" data-path="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html#command-line-tool"><i class="fa fa-check"></i><b>3.1.2</b> Command line tool</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html#uploading-data-to-s3"><i class="fa fa-check"></i><b>3.2</b> Uploading data to S3</a><ul>
<li class="chapter" data-level="3.2.1" data-path="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html#where-data-is-stored"><i class="fa fa-check"></i><b>3.2.1</b> Where data is stored</a></li>
<li class="chapter" data-level="3.2.2" data-path="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html"><a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html#uploading-data"><i class="fa fa-check"></i><b>3.2.2</b> Uploading data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html"><i class="fa fa-check"></i><b>4</b> Deploying a Shiny App</a><ul>
<li class="chapter" data-level="4.1" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#step-by-step-guide-to-deploying-an-app"><i class="fa fa-check"></i><b>4.1</b> Step-by-step guide to deploying an app</a><ul>
<li class="chapter" data-level="4.1.1" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#copy-the-template-project-into-a-new-github-repository"><i class="fa fa-check"></i><b>4.1.1</b> Copy the template project into a new Github repository</a></li>
<li class="chapter" data-level="4.1.2" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#in-r-studio-in-the-platform-create-a-new-project-from-your-new-github-repository"><i class="fa fa-check"></i><b>4.1.2</b> In R Studio in the platform, create a new project from your new Github repository</a></li>
<li class="chapter" data-level="4.1.3" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#work-on-your-app"><i class="fa fa-check"></i><b>4.1.3</b> Work on your app</a></li>
<li class="chapter" data-level="4.1.4" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#snapshot-dependencies-using-packrat"><i class="fa fa-check"></i><b>4.1.4</b> Snapshot dependencies using packrat</a></li>
<li class="chapter" data-level="4.1.5" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#scan-organisation-and-deploy"><i class="fa fa-check"></i><b>4.1.5</b> Scan organisation and deploy</a></li>
<li class="chapter" data-level="4.1.6" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#grant-secure-access-to-the-app"><i class="fa fa-check"></i><b>4.1.6</b> Grant secure access to the app</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#accessing-the-app"><i class="fa fa-check"></i><b>4.2</b> Accessing the app</a></li>
<li class="chapter" data-level="4.3" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#access-levels"><i class="fa fa-check"></i><b>4.3</b> Access Levels</a></li>
<li class="chapter" data-level="4.4" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#advanced-deployment"><i class="fa fa-check"></i><b>4.4</b> Advanced deployment</a><ul>
<li class="chapter" data-level="4.4.1" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#what-is-run-when-i-deploy-a-shiny-app"><i class="fa fa-check"></i><b>4.4.1</b> What is run when I deploy a Shiny app?</a></li>
<li class="chapter" data-level="4.4.2" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#can-i-change-my-build"><i class="fa fa-check"></i><b>4.4.2</b> Can I change my build?</a></li>
<li class="chapter" data-level="4.4.3" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#how-can-i-troubleshoot-problems"><i class="fa fa-check"></i><b>4.4.3</b> How can I troubleshoot problems?</a></li>
<li class="chapter" data-level="4.4.4" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#troubleshooting-using-docker-installed-locally-on-a-macbook"><i class="fa fa-check"></i><b>4.4.4</b> Troubleshooting using Docker (installed locally on a Macbook)</a></li>
<li class="chapter" data-level="4.4.5" data-path="deploying-a-shiny-app.html"><a href="deploying-a-shiny-app.html#if-all-else-fails"><i class="fa fa-check"></i><b>4.4.5</b> If all else fails…</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html"><i class="fa fa-check"></i><b>5</b> Deploying a Static Web App</a><ul>
<li class="chapter" data-level="5.1" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#step-by-step-guide-to-depolying-an-static-web-app"><i class="fa fa-check"></i><b>5.1</b> Step-by-step guide to depolying an static web app</a><ul>
<li class="chapter" data-level="5.1.1" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#copy-the-template-project-into-a-new-github-repository-1"><i class="fa fa-check"></i><b>5.1.1</b> Copy the template project into a new Github repository</a></li>
<li class="chapter" data-level="5.1.2" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#in-your-chosen-development-enviroment-clone-the-git-repository"><i class="fa fa-check"></i><b>5.1.2</b> In your chosen development enviroment, clone the git repository</a></li>
<li class="chapter" data-level="5.1.3" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#work-on-your-web-app"><i class="fa fa-check"></i><b>5.1.3</b> Work on your web app</a></li>
<li class="chapter" data-level="5.1.4" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#scan-organisation-and-deploy-1"><i class="fa fa-check"></i><b>5.1.4</b> Scan organisation and deploy</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#accessing-the-app-1"><i class="fa fa-check"></i><b>5.2</b> Accessing the app</a></li>
<li class="chapter" data-level="5.3" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#access-levels-1"><i class="fa fa-check"></i><b>5.3</b> Access Levels</a></li>
<li class="chapter" data-level="5.4" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#advanced-deployment-1"><i class="fa fa-check"></i><b>5.4</b> Advanced deployment</a><ul>
<li class="chapter" data-level="5.4.1" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#can-i-change-my-build-1"><i class="fa fa-check"></i><b>5.4.1</b> Can I change my build?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html"><i class="fa fa-check"></i><b>6</b> Common Errors and Sollutions</a><ul>
<li class="chapter" data-level="6.1" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html#failed-to-lock-directory"><i class="fa fa-check"></i><b>6.1</b> Failed to lock directory</a></li>
<li class="chapter" data-level="6.2" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html#platform-two-factor-authentication-failing"><i class="fa fa-check"></i><b>6.2</b> Platform two factor authentication failing</a></li>
<li class="chapter" data-level="6.3" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html#unable-to-access-data-using-aws.s3-package."><i class="fa fa-check"></i><b>6.3</b> Unable to access data using <code>aws.s3</code> package.</a></li>
<li class="chapter" data-level="6.4" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html#s3toolss3_path_to_full_df-fails-on-excel-file"><i class="fa fa-check"></i><b>6.4</b> <code>s3tools::s3_path_to_full_df()</code> fails on Excel file</a></li>
<li class="chapter" data-level="6.5" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html#two-factor-authentication-problems"><i class="fa fa-check"></i><b>6.5</b> Two Factor Authentication problems</a><ul>
<li class="chapter" data-level="6.5.1" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html#ive-lost-my-platform-2fa"><i class="fa fa-check"></i><b>6.5.1</b> I’ve lost my platform 2FA</a></li>
<li class="chapter" data-level="6.5.2" data-path="common-errors-and-sollutions.html"><a href="common-errors-and-sollutions.html#i-have-entered-my-2fa-code-but-the-platform-will-not-accept-it"><i class="fa fa-check"></i><b>6.5.2</b> I have entered my 2FA code, but the platform will not accept it</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="user-administration.html"><a href="user-administration.html"><i class="fa fa-check"></i><b>7</b> User Administration</a><ul>
<li class="chapter" data-level="7.1" data-path="user-administration.html"><a href="user-administration.html#teams-and-data-access-groups"><i class="fa fa-check"></i><b>7.1</b> Teams and data access groups</a><ul>
<li class="chapter" data-level="7.1.1" data-path="user-administration.html"><a href="user-administration.html#team-creation"><i class="fa fa-check"></i><b>7.1.1</b> Team creation</a></li>
<li class="chapter" data-level="7.1.2" data-path="user-administration.html"><a href="user-administration.html#adding-or-removing-users-from-a-team"><i class="fa fa-check"></i><b>7.1.2</b> Adding or removing users from a team</a></li>
<li class="chapter" data-level="7.1.3" data-path="user-administration.html"><a href="user-administration.html#team-member-permissions"><i class="fa fa-check"></i><b>7.1.3</b> Team member permissions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="security-operating-procedures.html"><a href="security-operating-procedures.html"><i class="fa fa-check"></i><b>8</b> Security Operating Procedures</a><ul>
<li class="chapter" data-level="8.1" data-path="security-operating-procedures.html"><a href="security-operating-procedures.html#general-security-guidance"><i class="fa fa-check"></i><b>8.1</b> General security guidance</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html"><i class="fa fa-check"></i><b>9</b> Using Github with R Studio</a><ul>
<li class="chapter" data-level="9.1" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#syncing-you-r-studio-work-with-github"><i class="fa fa-check"></i><b>9.1</b> Syncing you R Studio work with Github</a><ul>
<li class="chapter" data-level="9.1.1" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-1---create-a-new-project-repo-in-the-moj-analytical-services-github-page"><i class="fa fa-check"></i><b>9.1.1</b> Step 1 - Create a new project (‘repo’) in the moj-analytical-services Github page</a></li>
<li class="chapter" data-level="9.1.2" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-2-navigate-to-your-platform-r-studio-and-make-a-copy-of-the-github-project-in-your-r-studio"><i class="fa fa-check"></i><b>9.1.2</b> Step 2: Navigate to your platform R Studio and make a copy of the Github project in your R Studio</a></li>
<li class="chapter" data-level="9.1.3" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-3-edit-your-files-track-them-using-git-and-sync-push-changes-to-github"><i class="fa fa-check"></i><b>9.1.3</b> Step 3: Edit your files, track them using Git, and sync (‘push’) changes to Github</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#working-on-a-branch."><i class="fa fa-check"></i><b>9.2</b> Working on a branch.</a><ul>
<li class="chapter" data-level="9.2.1" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-1-optional-create-an-issue-in-github-that-describes-the-piece-of-work-youre-about-to-do-the-purpose-of-the-branch"><i class="fa fa-check"></i><b>9.2.1</b> Step 1 (optional): Create an Issue in github that describes the piece of work you’re about to do (the purpose of the branch)</a></li>
<li class="chapter" data-level="9.2.2" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-2-create-a-new-branch-in-r-studio-and-tell-github-about-its-existence"><i class="fa fa-check"></i><b>9.2.2</b> Step 2: Create a new branch in R Studio and tell Github about its existence</a></li>
<li class="chapter" data-level="9.2.3" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-3-make-some-changes-to-address-the-github-issue-and-push-sync-them-with-github"><i class="fa fa-check"></i><b>9.2.3</b> Step 3: Make some changes to address the Github issue, and push (sync) them with Github</a></li>
<li class="chapter" data-level="9.2.4" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-4-view-changes-on-github-and-create-pull-request"><i class="fa fa-check"></i><b>9.2.4</b> Step 4: View changes on Github and create pull request</a></li>
<li class="chapter" data-level="9.2.5" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#step-5-sync-the-changes-you-made-on-github.com-with-your-local-platform"><i class="fa fa-check"></i><b>9.2.5</b> Step 5: Sync the changes you made on github.com with your local platform</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#other-tips-and-tricks-work-in-progress"><i class="fa fa-check"></i><b>9.3</b> Other tips and tricks [Work in progress!]:</a><ul>
<li class="chapter" data-level="9.3.1" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#search-the-code-in-moj-analytical-services-to-see-who-else-has-used-a-package."><i class="fa fa-check"></i><b>9.3.1</b> Search the code in MoJ Analytical Services to see who else has used a package.</a></li>
<li class="chapter" data-level="9.3.2" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#hyperlink-to-a-specific-line-of-code-in-your-project"><i class="fa fa-check"></i><b>9.3.2</b> Hyperlink to a specific line of code in your project</a></li>
<li class="chapter" data-level="9.3.3" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#make-your-project-available-to-people-on-different-teams"><i class="fa fa-check"></i><b>9.3.3</b> Make your project available to people on different teams</a></li>
<li class="chapter" data-level="9.3.4" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#assign-a-reviewer-to-a-pull-request-and-leave-comments."><i class="fa fa-check"></i><b>9.3.4</b> Assign a reviewer to a pull request, and leave comments.</a></li>
<li class="chapter" data-level="9.3.5" data-path="using-github-with-r-studio.html"><a href="using-github-with-r-studio.html#view-how-files-have-changed-on-the-platform-and-on"><i class="fa fa-check"></i><b>9.3.5</b> View how files have changed on the platform and on</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Platform Guidance</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="deploying-a-shiny-app" class="section level1">
<h1><span class="header-section-number">Part 4</span> Deploying a Shiny App</h1>
<p>The following steps to deploy a Shiny app are as follows:</p>
<ol style="list-style-type: decimal">
<li>Copy the <a href="https://github.com/moj-analytical-services/rshiny-example">template project</a> within Github to a new repository, with a name of your choice.</li>
<li>In R Studio, start a new project from version control (file -&gt; new project -&gt; version control -&gt; git). TODO: Remember to make sure the template has a Rproj that enables packrat</li>
<li>Work on your Shiny app, using the template <code>ui.R</code> and <code>server.R</code> files.<br />
</li>
<li>Ensure that your package dependencies are snapshotted using <code>packrat::snapshot()</code></li>
<li>When you’re ready to share it, access the <a href="https://jenkins.services.alpha.mojanalytics.xyz/">Services control panel</a>, find your app, and click ‘Build now’.</li>
<li>Once deployed, grant users access to the app by inserting their names into the <a href="https://controlpanel.services.alpha.mojanalytics.xyz/">Grant user access control panel</a>.</li>
</ol>
<p>Step-by-step instructions are below.</p>
<p>For advanced users, the guidance <a href="deploying-a-static-web-app.html#advanced-deployment-1">here</a> discusses customisability and options for deployment. Refer to this guidance if you are already familiar with git, packrat etc.</p>
<div id="step-by-step-guide-to-deploying-an-app" class="section level2">
<h2><span class="header-section-number">4.1</span> Step-by-step guide to deploying an app</h2>
<div id="copy-the-template-project-into-a-new-github-repository" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Copy the template project into a new Github repository</h3>
<ol style="list-style-type: decimal">
<li><p>Begin by making a <strong>copy</strong> of the R Shiny template project on Github: <a href="https://github.com/new/import" class="uri">https://github.com/new/import</a>.</p></li>
<li><p>Enter <code>https://github.com/moj-analytical-services/rshiny-template</code> in the input box entitled ‘your old repository’s clone URL:’</p></li>
<li><p>Ensure the ‘owner’ of the new repository is ‘moj-analytical-services’ and choose a name for your repository:</p></li>
<li><p>Make sure the repo is ‘private’ (this should be the default value):</p></li>
<li><p>Click ‘Begin import’</p></li>
</ol>
<div class="figure">
<img src="images/shiny/github_shiny_import.gif" alt="" />

</div>
</div>
<div id="in-r-studio-in-the-platform-create-a-new-project-from-your-new-github-repository" class="section level3">
<h3><span class="header-section-number">4.1.2</span> In R Studio in the platform, create a new project from your new Github repository</h3>
<p>In R Studio, navigate through the following menus:</p>
<p>File -&gt; New project -&gt; Version control -&gt; Git</p>
<div class="figure">
<img src="images/shiny/github_shiny_rstudio.gif" alt="" />

</div>
<p>In ‘Repository URL’, enter the URL of the repository you just created. This needs to be the SSH URL (starting with <code>git@github</code>), <strong>NOT</strong> the HTTPS url (which starts with <code>https</code>). Therefore, it is in the following format:</p>
<pre><code>git@github.com:moj-analytical-services/your_name_goes_here.git</code></pre>
<p>R Studio will create a new project folder with all the template files in.</p>
<p>You can now start building your Shiny app by editing <code>server.R</code> and <code>ui.R</code> files.</p>
<div id="further-notes-if-youre-having-trouble-finding-your-new-repos-url" class="section level4">
<h4><span class="header-section-number">4.1.2.1</span> Further notes if you’re having trouble finding your new repo’s url</h4>
<p>If you navigate to your new repository’s home page (which will have a url in the form <code>https://github.com/moj-analytical-services/your_name_goes_here</code>), you can use the following buttons to access this url (make sure you click the ‘ssh’ button):</p>
<div class="figure">
<img src="images/shiny/use_ssh.PNG" alt="" />

</div>
<div class="figure">
<img src="images/shiny/ssh_url.PNG" alt="" />

</div>
</div>
</div>
<div id="work-on-your-app" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Work on your app</h3>
<p>You can now work on your Shiny app in R Studio as normal. As you work, commit your changes to Github using your chosen Github workflow.</p>
</div>
<div id="snapshot-dependencies-using-packrat" class="section level3">
<h3><span class="header-section-number">4.1.4</span> Snapshot dependencies using packrat</h3>
<p>Your Shiny app will have dependencies on various third-party R packages (e.g. <code>dplyr</code>). These packages change through time, and sometimes these changes are not backwards compatible. When we deploy your Shiny app, it is therefore essential to include a manifest of all of the package dependencies and their specific versions.</p>
<p>The R package<code>packrat</code> automates this process. Before deploying your app, you need to call <code>packrat::snapshot()</code> to automatically create this manifest. You may want to call <code>packrat::clean()</code> to remove any dependencies that are no longer in use.</p>
<p>This creates a file called <code>packrat/packrat.lock</code>. You need to ensure you have committed this to the Github repository prior to deployment.</p>
<div class="figure">
<img src="images/shiny/github_packrat_snapshot.gif" alt="" />

</div>
</div>
<div id="scan-organisation-and-deploy" class="section level3">
<h3><span class="header-section-number">4.1.5</span> Scan organisation and deploy</h3>
<p>The platform automatically scans git repositories in the <a href="https://github.com/moj-analytical-services/">moj-analytical-services</a> Github organisation to find repos that are ready to deploy. It does this by checking whether repositories contains two ‘magic’ files that control deployment: <code>Jenkinsfile</code> and <code>Dockerfile</code>.</p>
<p>To deploy your app, go <a href="https://jenkins.services.alpha.mojanalytics.xyz/job/moj-analytical-services-github/">here</a>.</p>
<ol style="list-style-type: decimal">
<li><p>You will see a list of apps that have been detected. Find yours and click on the link with its name (if you’re app isnt listed then click “Scan Organisation Now” on the left hand menu and wait for the scan to complete. This step may take a few minutes.)</p></li>
<li><p>Then click on the branch you wish to deploy (this will usually be ‘master’)</p></li>
<li><p>Click ‘Build’.</p></li>
<li><p>If this is the first time you’ve deployed the webpage it will be setup as a private page (only accessable to users with a given email). If you wish to grant access based on IP or make the website public you’ll need to build again:</p></li>
<li><p>For the second build you be asked whether email authentication should be enabled (where you grant users access using their email address or if access is restricted based on network). For a ellaboration on this see <a href="deploying-a-static-web-app.html#access-levels-1">Access levels</a>.</p>
<p>In the example below, I grant unrestricted access to the app.</p></li>
</ol>
<div class="figure">
<img src="images/static/static_deploy.gif" alt="" />

</div>
</div>
<div id="grant-secure-access-to-the-app" class="section level3">
<h3><span class="header-section-number">4.1.6</span> Grant secure access to the app</h3>
<p>If you deployed with authentication enabled users are granted access to the app using a list of email addresses separated with a space, comma or semicolon.</p>
<p>To grant access, complete the form <a href="https://controlpanel.services.alpha.mojanalytics.xyz/job/grant-access-to-app/build?delay=0sec">here</a>, and press ‘Build’.</p>
<p>For example, your form might look like this:</p>
<div class="figure">
<img src="images/shiny/jenkins_email.gif" alt="" />

</div>
<p>NOTE: Any characters which are not alphanumeric or dashes are converted into dashes.</p>
</div>
</div>
<div id="accessing-the-app" class="section level2">
<h2><span class="header-section-number">4.2</span> Accessing the app</h2>
<p>Only users who you have granted access to will be able to access your app - the url for the app will be the <code>respository-name</code> followed by <code>apps.alpha.mojanalytics.xyz</code>.</p>
<p>So for the example project above “test-shiny-project”, the deployment url will be <code>https://test-shiny-project.apps.alpha.mojanalytics.xyz</code>.</p>
<p>Note that characters that are not compatible with website URLs are converted. So, repositories with underscores in their name (e.g. <code>repository_name.apps...</code>) will be converted to dashes for the URL (e.g. <code>repository_name.apps...</code>).</p>
<p>Users will be prompted to enter their email and, if they are on the approved list, be sent a access link to view the app.</p>
<div class="figure">
<img src="images/shiny/shiny_app_auth.gif" alt="" />

</div>
</div>
<div id="access-levels" class="section level2">
<h2><span class="header-section-number">4.3</span> Access Levels</h2>
<p>When deploying a static website you’ll be asked for <strong>IP restrictions</strong> and whether <strong>authentication</strong> is required.</p>
<p><strong>IP restrictions</strong> restrict access the the static website based on the users network address. This can be useful if you want to make a site accessable to the organisation, without having to grant access on an email-by-email basis.</p>
<p>The available levels are:</p>
<ul>
<li>DOM1 (excluding guest WiFi users but including those using AnyConnect)</li>
<li>DOM1 and Quantum</li>
<li>DOM1, Quantum and 102PF WiFi (including guest WiFi users)</li>
<li>DOM1, Quantum, 102PF WiFi and Clive House WiFi (including guest WiFi users)</li>
<li>Any location (this is a public website)</li>
</ul>
<p>The <strong>authentication</strong> tickbox determines whether or not users will have to be granted access via their email address. If you wish to enable this option visit the <a href="https://controlpanel.services.alpha.mojanalytics.xyz/">grant user access control panel</a>, where you can enter a list of emails. For more info see the <a href="deploying-a-shiny-app.html#grant-secure-access-to-the-app">secure access documentation</a>.</p>
</div>
<div id="advanced-deployment" class="section level2">
<h2><span class="header-section-number">4.4</span> Advanced deployment</h2>
<p>This section contains guidance for advanced users on app deployment.</p>
<div id="what-is-run-when-i-deploy-a-shiny-app" class="section level3">
<h3><span class="header-section-number">4.4.1</span> What is run when I deploy a Shiny app?</h3>
<p>When you deploy an app, the R Shiny server runs <code>shiny::runApp()</code> within the project. This is equivalent to when you press ‘run’ in a R Shiny project within R Studio.</p>
<p>To understand how you can use this to deploy apps of different types, we can refer to the <code>runApp</code> <a href="https://shiny.rstudio.com/reference/shiny/latest/runApp.html">docs</a>. Specifically, the ‘arguments’ section is useful:</p>
<pre><code>Arguments
    appDir  The application to run. Should be one of the following:
        A directory containing server.R, plus, either ui.R or a www directory that contains the file index.html.
        A directory containing app.R.
        An .R file containing a Shiny application, ending with an expression that produces a Shiny app object.
        A list with ui and server components.
        A Shiny app object created by shinyApp.</code></pre>
<p>One of those options is <code>A directory containing app.R.</code>, which should contain: <code>An .R file containing a Shiny application, ending with an expression that produces a Shiny app object.</code>.</p>
<p>This gives the developer a wider range of options of how to deploy a Shiny app, and makes it possible to deploy shiny apps that are bundled into pre-existing packages e.g. see <a href="https://github.com/RobinL/costmodelr/blob/b328902026bd1cce5d17b487e310c59725ea4d62/R/shiny_explorer.r#L20">here</a>.</p>
</div>
<div id="can-i-change-my-build" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Can I change my build?</h3>
<p>Yes - if you know Docker, you are welcome to change the <a href="https://github.com/moj-analytical-services/rshiny-template/blob/master/Dockerfile">Dockerfile</a>.</p>
</div>
<div id="how-can-i-troubleshoot-problems" class="section level3">
<h3><span class="header-section-number">4.4.3</span> How can I troubleshoot problems?</h3>
<p>To view the logs, see the <a href="https://kibana.services.dev.mojanalytics.xyz/login">Kibana dashboard</a>.</p>
<p>If you’re still having problems, you can deploy the app locally using Docker.</p>
</div>
<div id="troubleshooting-using-docker-installed-locally-on-a-macbook" class="section level3">
<h3><span class="header-section-number">4.4.4</span> Troubleshooting using Docker (installed locally on a Macbook)</h3>
<p>First <code>cd</code> into the directory containing the Dockerfile. Then run:</p>
<p><code>docker build . -t your_name_here</code> (<code>your_name_here</code> is the tag you want to give to the image)</p>
<p>By building the image, it will test the installation of the packrat dependencies and package your shiny app into a Linux environment identical to what’s on the platform.</p>
<p>Remember to refresh Docker if you are re-building a previously built app in the directory (the previous build will show when you view the app otherwise).</p>
<p>Run the Shiny server in a linux container with <code>docker run -p 80:80 your_name_here</code></p>
<p>You can then go to <a href="http://127.0.0.1:80" class="uri">http://127.0.0.1:80</a> to see if the app is working.</p>
<p>If it is not, you can investigate what’s going on in the server using:</p>
<p><code>docker run -it -p 80:80 your_name_here bash</code></p>
<p>Install the nano text editor:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">apt-get</span> update
<span class="kw">apt-get</span> install nano</code></pre></div>
<p>Then edit the config file at <code>nano /etc/shiny-server/shiny-server.conf</code> to add the following two lines at the beginning:</p>
<pre><code>access_log /var/log/shiny-server/access.log tiny;
preserve_logs true;</code></pre>
<p>Save by pressing <code>[CTRL]+[O]</code> and then exit with <code>[CTRL]+[X]</code>.</p>
<p>Finally change the log level to be more verbose and start the shiny server:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">export</span> <span class="ot">SHINY_LOG_LEVEL=</span>TRACE
<span class="kw">/bin/shiny-server.sh</span></code></pre></div>
<p>For further details see the <a href="http://docs.rstudio.com/shiny-server">rshiny-server documetation</a></p>
<p>Now we need another terminal window, to get back into the docker container</p>
<p><code>docker ps</code> to find the name of the container and then</p>
<p><code>docker exec -it container_name bash</code></p>
<p>Logs are then written to <code>cd /var/log/shiny-server/</code></p>
</div>
<div id="if-all-else-fails" class="section level3">
<h3><span class="header-section-number">4.4.5</span> If all else fails…</h3>
<p>Sometimes, the following steps can resolve problems with <code>packrat.lock</code>:</p>
<ul>
<li>Delete the entire <code>packrat</code> directory</li>
<li>Comment out all code in the project</li>
<li>Enable packrat with <code>packrat::init()</code></li>
<li>Freeze packrat dependencies with <code>packrat::snapshot()</code></li>
<li>Uncomment all code in project, and install dependencies one at a time using <code>install.packages()</code></li>
<li><code>packrat::snapshot()</code> again</li>
<li>Try redeploying</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-big-datasets-and-sharing-them-accessing-data-in-amazon-s3.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="deploying-a-static-web-app.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
