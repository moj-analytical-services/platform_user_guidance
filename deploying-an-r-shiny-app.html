<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Part 4 Deploying an R Shiny app | Analytical Platform User Guidance</title>
  <meta name="description" content="This repository contains user guidance for the Analytical Platform.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Part 4 Deploying an R Shiny app | Analytical Platform User Guidance />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This repository contains user guidance for the Analytical Platform." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Part 4 Deploying an R Shiny app | Analytical Platform User Guidance />
  
  <meta name="twitter:description" content="This repository contains user guidance for the Analytical Platform." />
  

<meta name="author" content="MoJ Analytical Platform Team">


<meta name="date" content="2019-06-26">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="github.html">
<link rel="next" href="deploying-a-static-web-app.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this guidance</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-the-analytical-platform"><i class="fa fa-check"></i><b>1.1</b> What is the Analytical Platform?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#get-started"><i class="fa fa-check"></i><b>1.2</b> Get started</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#read-our-acceptable-use-policy-and-coding-standards"><i class="fa fa-check"></i><b>1.2.1</b> Read our acceptable use policy and coding standards</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#sign-up-for-a-github-account"><i class="fa fa-check"></i><b>1.2.2</b> Sign up for a GitHub account</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction.html"><a href="introduction.html#verify-your-email-address-for-github"><i class="fa fa-check"></i><b>1.2.3</b> Verify your email address for GitHub</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction.html"><a href="introduction.html#configure-two-factor-authentication-for-github"><i class="fa fa-check"></i><b>1.2.4</b> Configure two-factor authentication for GitHub</a></li>
<li class="chapter" data-level="1.2.5" data-path="introduction.html"><a href="introduction.html#request-an-account-from-the-analytical-platform-team"><i class="fa fa-check"></i><b>1.2.5</b> Request an account from the Analytical Platform team</a></li>
<li class="chapter" data-level="1.2.6" data-path="introduction.html"><a href="introduction.html#accept-your-invitation-to-the-moj-analytical-services-github-organisation"><i class="fa fa-check"></i><b>1.2.6</b> Accept your invitation to the MoJ Analytical Services GitHub organisation</a></li>
<li class="chapter" data-level="1.2.7" data-path="introduction.html"><a href="introduction.html#configure-two-factor-authentication-for-the-analytical-platform"><i class="fa fa-check"></i><b>1.2.7</b> Configure two-factor authentication for the Analytical Platform</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#access-the-analytical-platform"><i class="fa fa-check"></i><b>1.3</b> Access the Analytical Platform</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#work-with-analytical-tools"><i class="fa fa-check"></i><b>1.4</b> Work with analytical tools</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introduction.html"><a href="introduction.html#deploy-analytical-tools"><i class="fa fa-check"></i><b>1.4.1</b> Deploy analytical tools</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction.html"><a href="introduction.html#open-analytical-tools"><i class="fa fa-check"></i><b>1.4.2</b> Open analytical tools</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction.html"><a href="introduction.html#restart-analytical-tools"><i class="fa fa-check"></i><b>1.4.3</b> Restart analytical tools</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction.html"><a href="introduction.html#unidle-analytical-tools"><i class="fa fa-check"></i><b>1.4.4</b> Unidle analytical tools</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#configure-git-and-github"><i class="fa fa-check"></i><b>1.5</b> Configure Git and GitHub</a><ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#create-an-ssh-key"><i class="fa fa-check"></i><b>1.5.1</b> Create an SSH key</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction.html"><a href="introduction.html#add-the-ssh-key-to-github"><i class="fa fa-check"></i><b>1.5.2</b> Add the SSH key to GitHub</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction.html"><a href="introduction.html#configure-you-username-and-email-in-git-on-the-analytical-platform"><i class="fa fa-check"></i><b>1.5.3</b> Configure you username and email in Git on the Analytical Platform</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#contact-us"><i class="fa fa-check"></i><b>1.6</b> Contact us</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#slack"><i class="fa fa-check"></i><b>1.7</b> Slack</a><ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#what-is-slack"><i class="fa fa-check"></i><b>1.7.1</b> What is Slack?</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#access-slack"><i class="fa fa-check"></i><b>1.7.2</b> Access Slack</a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction.html"><a href="introduction.html#channels"><i class="fa fa-check"></i><b>1.7.3</b> Channels</a></li>
<li class="chapter" data-level="1.7.4" data-path="introduction.html"><a href="introduction.html#further-information"><i class="fa fa-check"></i><b>1.7.4</b> Further information</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="amazon-s3.html"><a href="amazon-s3.html"><i class="fa fa-check"></i><b>2</b> Amazon S3</a><ul>
<li class="chapter" data-level="2.1" data-path="amazon-s3.html"><a href="amazon-s3.html#what-is-amazon-s3"><i class="fa fa-check"></i><b>2.1</b> What is Amazon S3?</a></li>
<li class="chapter" data-level="2.2" data-path="amazon-s3.html"><a href="amazon-s3.html#working-with-amazon-s3-buckets"><i class="fa fa-check"></i><b>2.2</b> Working with Amazon S3 buckets</a><ul>
<li class="chapter" data-level="2.2.1" data-path="amazon-s3.html"><a href="amazon-s3.html#types-of-buckets"><i class="fa fa-check"></i><b>2.2.1</b> Types of buckets</a></li>
<li class="chapter" data-level="2.2.2" data-path="amazon-s3.html"><a href="amazon-s3.html#create-a-new-bucket"><i class="fa fa-check"></i><b>2.2.2</b> Create a new bucket</a></li>
<li class="chapter" data-level="2.2.3" data-path="amazon-s3.html"><a href="amazon-s3.html#access-levels"><i class="fa fa-check"></i><b>2.2.3</b> Access levels</a></li>
<li class="chapter" data-level="2.2.4" data-path="amazon-s3.html"><a href="amazon-s3.html#request-access-to-a-bucket"><i class="fa fa-check"></i><b>2.2.4</b> Request access to a bucket</a></li>
<li class="chapter" data-level="2.2.5" data-path="amazon-s3.html"><a href="amazon-s3.html#manage-access-to-a-bucket"><i class="fa fa-check"></i><b>2.2.5</b> Manage access to a bucket</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="amazon-s3.html"><a href="amazon-s3.html#upload-files-to-amazon-s3"><i class="fa fa-check"></i><b>2.3</b> Upload files to Amazon S3</a><ul>
<li class="chapter" data-level="2.3.1" data-path="amazon-s3.html"><a href="amazon-s3.html#amazon-s3-console"><i class="fa fa-check"></i><b>2.3.1</b> Amazon S3 Console</a></li>
<li class="chapter" data-level="2.3.2" data-path="amazon-s3.html"><a href="amazon-s3.html#rstudio-1"><i class="fa fa-check"></i><b>2.3.2</b> RStudio</a></li>
<li class="chapter" data-level="2.3.3" data-path="amazon-s3.html"><a href="amazon-s3.html#jupyterlab-1"><i class="fa fa-check"></i><b>2.3.3</b> JupyterLab</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="amazon-s3.html"><a href="amazon-s3.html#download-or-read-files-from-amazon-s3"><i class="fa fa-check"></i><b>2.4</b> Download or read files from Amazon S3</a><ul>
<li class="chapter" data-level="2.4.1" data-path="amazon-s3.html"><a href="amazon-s3.html#amazon-s3-console-1"><i class="fa fa-check"></i><b>2.4.1</b> Amazon S3 Console</a></li>
<li class="chapter" data-level="2.4.2" data-path="amazon-s3.html"><a href="amazon-s3.html#rstudio-2"><i class="fa fa-check"></i><b>2.4.2</b> RStudio</a></li>
<li class="chapter" data-level="2.4.3" data-path="amazon-s3.html"><a href="amazon-s3.html#jupyterlab-2"><i class="fa fa-check"></i><b>2.4.3</b> JupyterLab</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>3</b> Using Github with the platform</a><ul>
<li class="chapter" data-level="3.1" data-path="github.html"><a href="github.html#creating-your-project-repo-on-github"><i class="fa fa-check"></i><b>3.1</b> Creating your project repo on GitHub</a><ul>
<li class="chapter" data-level="3.1.1" data-path="github.html"><a href="github.html#step-1---create-a-new-project-repo-in-the-moj-analytical-services-github-page"><i class="fa fa-check"></i><b>3.1.1</b> Step 1 - Create a new project repo in the moj-analytical-services Github page</a></li>
<li class="chapter" data-level="3.1.2" data-path="github.html"><a href="github.html#step-2-navigate-to-your-new-repository-on-github-to-decide-who-can-see-your-code"><i class="fa fa-check"></i><b>3.1.2</b> Step 2: Navigate to your new Repository on GitHub to decide who can see your code</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="github.html"><a href="github.html#r-studio"><i class="fa fa-check"></i><b>3.2</b> R Studio</a><ul>
<li class="chapter" data-level="3.2.1" data-path="github.html"><a href="github.html#step-1-navigate-to-your-platform-r-studio-and-make-a-copy-of-the-github-project-in-your-r-studio"><i class="fa fa-check"></i><b>3.2.1</b> Step 1: Navigate to your platform R Studio and make a copy of the Github project in your R Studio</a></li>
<li class="chapter" data-level="3.2.2" data-path="github.html"><a href="github.html#step-2-edit-your-files-track-them-using-git-and-sync-push-changes-to-github"><i class="fa fa-check"></i><b>3.2.2</b> Step 2: Edit your files, track them using Git, and sync (‘push’) changes to Github</a></li>
<li class="chapter" data-level="3.2.3" data-path="github.html"><a href="github.html#step-3-sync-push-your-work-with-github.com"><i class="fa fa-check"></i><b>3.2.3</b> Step 3: Sync (‘push’) your work with github.com</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="github.html"><a href="github.html#jupyter"><i class="fa fa-check"></i><b>3.3</b> Jupyter</a></li>
<li class="chapter" data-level="3.4" data-path="github.html"><a href="github.html#command-line"><i class="fa fa-check"></i><b>3.4</b> Command-line</a></li>
<li class="chapter" data-level="3.5" data-path="github.html"><a href="github.html#working-on-a-branch"><i class="fa fa-check"></i><b>3.5</b> Working on a branch</a><ul>
<li class="chapter" data-level="3.5.1" data-path="github.html"><a href="github.html#step-1-optional-create-an-issue-in-github-that-describes-the-piece-of-work-youre-about-to-do-the-purpose-of-the-branch"><i class="fa fa-check"></i><b>3.5.1</b> Step 1 (optional): Create an Issue in github that describes the piece of work you’re about to do (the purpose of the branch)</a></li>
<li class="chapter" data-level="3.5.2" data-path="github.html"><a href="github.html#step-2-create-a-new-branch-in-r-studio-and-tell-github-about-its-existence"><i class="fa fa-check"></i><b>3.5.2</b> Step 2: Create a new branch in R Studio and tell Github about its existence</a></li>
<li class="chapter" data-level="3.5.3" data-path="github.html"><a href="github.html#step-3-make-some-changes-to-address-the-github-issue-and-push-sync-them-with-github"><i class="fa fa-check"></i><b>3.5.3</b> Step 3: Make some changes to address the Github issue, and push (sync) them with Github</a></li>
<li class="chapter" data-level="3.5.4" data-path="github.html"><a href="github.html#step-4-view-changes-on-github-and-create-pull-request"><i class="fa fa-check"></i><b>3.5.4</b> Step 4: View changes on Github and create pull request</a></li>
<li class="chapter" data-level="3.5.5" data-path="github.html"><a href="github.html#step-5-sync-the-changes-you-made-on-github.com-with-your-local-platform"><i class="fa fa-check"></i><b>3.5.5</b> Step 5: Sync the changes you made on github.com with your local platform</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="github.html"><a href="github.html#git-training-resources"><i class="fa fa-check"></i><b>3.6</b> Git training resources</a></li>
<li class="chapter" data-level="3.7" data-path="github.html"><a href="github.html#safety-barriers"><i class="fa fa-check"></i><b>3.7</b> Safety barriers</a></li>
<li class="chapter" data-level="3.8" data-path="github.html"><a href="github.html#private-r-packages-on-github-pat-authentication"><i class="fa fa-check"></i><b>3.8</b> Private R packages on GitHub: PAT authentication</a><ul>
<li class="chapter" data-level="3.8.1" data-path="github.html"><a href="github.html#private-and-public-repositories"><i class="fa fa-check"></i><b>3.8.1</b> Private and public repositories</a></li>
<li class="chapter" data-level="3.8.2" data-path="github.html"><a href="github.html#private-r-packages-for-reproducible-analysis"><i class="fa fa-check"></i><b>3.8.2</b> Private R packages for reproducible analysis</a></li>
<li class="chapter" data-level="3.8.3" data-path="github.html"><a href="github.html#generating-a-pat"><i class="fa fa-check"></i><b>3.8.3</b> Generating a PAT</a></li>
<li class="chapter" data-level="3.8.4" data-path="github.html"><a href="github.html#using-a-pat-to-authenticate-in-rrstudio"><i class="fa fa-check"></i><b>3.8.4</b> Using a PAT to authenticate in R/RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="github.html"><a href="github.html#other-tips-and-tricks-work-in-progress"><i class="fa fa-check"></i><b>3.9</b> Other tips and tricks [Work in progress!]</a><ul>
<li class="chapter" data-level="3.9.1" data-path="github.html"><a href="github.html#search-the-code-in-moj-analytical-services-to-see-who-else-has-used-a-package."><i class="fa fa-check"></i><b>3.9.1</b> Search the code in MoJ Analytical Services to see who else has used a package.</a></li>
<li class="chapter" data-level="3.9.2" data-path="github.html"><a href="github.html#hyperlink-to-a-specific-line-of-code-in-your-project"><i class="fa fa-check"></i><b>3.9.2</b> Hyperlink to a specific line of code in your project</a></li>
<li class="chapter" data-level="3.9.3" data-path="github.html"><a href="github.html#view-who-made-changes-to-code-when-and-why-using-git-blame."><i class="fa fa-check"></i><b>3.9.3</b> View who made changes to code, when and why using Git blame.</a></li>
<li class="chapter" data-level="3.9.4" data-path="github.html"><a href="github.html#make-your-project-available-to-people-on-different-teams"><i class="fa fa-check"></i><b>3.9.4</b> Make your project available to people on different teams</a></li>
<li class="chapter" data-level="3.9.5" data-path="github.html"><a href="github.html#assign-a-reviewer-to-a-pull-request-and-leave-comments."><i class="fa fa-check"></i><b>3.9.5</b> Assign a reviewer to a pull request, and leave comments.</a></li>
<li class="chapter" data-level="3.9.6" data-path="github.html"><a href="github.html#view-how-files-have-changed-on-the-platform-and-on"><i class="fa fa-check"></i><b>3.9.6</b> View how files have changed on the platform and on</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html"><i class="fa fa-check"></i><b>4</b> Deploying an R Shiny app</a><ul>
<li class="chapter" data-level="4.1" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#basic-deployment"><i class="fa fa-check"></i><b>4.1</b> Basic deployment</a><ul>
<li class="chapter" data-level="4.1.1" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#summary"><i class="fa fa-check"></i><b>4.1.1</b> Summary</a></li>
<li class="chapter" data-level="4.1.2" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#copy-template"><i class="fa fa-check"></i><b>4.1.2</b> Copy the app template</a></li>
<li class="chapter" data-level="4.1.3" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#create-webapp"><i class="fa fa-check"></i><b>4.1.3</b> Create a new webapp</a></li>
<li class="chapter" data-level="4.1.4" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#clone-repo"><i class="fa fa-check"></i><b>4.1.4</b> Clone the repository</a></li>
<li class="chapter" data-level="4.1.5" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#develop-the-app"><i class="fa fa-check"></i><b>4.1.5</b> Develop the app</a></li>
<li class="chapter" data-level="4.1.6" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#manage-dependencies"><i class="fa fa-check"></i><b>4.1.6</b> Manage dependencies</a></li>
<li class="chapter" data-level="4.1.7" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#rshiny-deploy"><i class="fa fa-check"></i><b>4.1.7</b> Set access permissions</a></li>
<li class="chapter" data-level="4.1.8" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#create-release"><i class="fa fa-check"></i><b>4.1.8</b> Create a release in GitHub</a></li>
<li class="chapter" data-level="4.1.9" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#deploy-in-concourse"><i class="fa fa-check"></i><b>4.1.9</b> Deploy in Concourse</a></li>
<li class="chapter" data-level="4.1.10" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#add-users"><i class="fa fa-check"></i><b>4.1.10</b> Add users to the app</a></li>
<li class="chapter" data-level="4.1.11" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#access-the-app"><i class="fa fa-check"></i><b>4.1.11</b> Access the app</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#advanced"><i class="fa fa-check"></i><b>4.2</b> Advanced</a><ul>
<li class="chapter" data-level="4.2.1" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#editing-the-dockerfile"><i class="fa fa-check"></i><b>4.2.1</b> Editing the Dockerfile</a></li>
<li class="chapter" data-level="4.2.2" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#getting-the-current-user-of-the-app"><i class="fa fa-check"></i><b>4.2.2</b> Getting the current user of the app</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#troubleshooting"><i class="fa fa-check"></i><b>4.3</b> Troubleshooting</a><ul>
<li class="chapter" data-level="4.3.1" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#common-errors"><i class="fa fa-check"></i><b>4.3.1</b> Common errors</a></li>
<li class="chapter" data-level="4.3.2" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#app-sign-in"><i class="fa fa-check"></i><b>4.3.2</b> App sign-in</a></li>
<li class="chapter" data-level="4.3.3" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#packrat"><i class="fa fa-check"></i><b>4.3.3</b> Packrat</a></li>
<li class="chapter" data-level="4.3.4" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#kibana"><i class="fa fa-check"></i><b>4.3.4</b> Kibana</a></li>
<li class="chapter" data-level="4.3.5" data-path="deploying-an-r-shiny-app.html"><a href="deploying-an-r-shiny-app.html#deploying-locally"><i class="fa fa-check"></i><b>4.3.5</b> Deploying locally</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html"><i class="fa fa-check"></i><b>5</b> Deploying a Static Web App</a><ul>
<li class="chapter" data-level="5.1" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#step-by-step-guide-to-depolying-an-static-web-app"><i class="fa fa-check"></i><b>5.1</b> Step-by-step guide to depolying an static web app</a><ul>
<li class="chapter" data-level="5.1.1" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#copy-the-template-project-into-a-new-github-repository"><i class="fa fa-check"></i><b>5.1.1</b> Copy the template project into a new Github repository</a></li>
<li class="chapter" data-level="5.1.2" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#in-your-chosen-development-enviroment-clone-the-git-repository"><i class="fa fa-check"></i><b>5.1.2</b> In your chosen development enviroment, clone the git repository</a></li>
<li class="chapter" data-level="5.1.3" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#work-on-your-web-app"><i class="fa fa-check"></i><b>5.1.3</b> Work on your web app</a></li>
<li class="chapter" data-level="5.1.4" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#scan-organisation-and-deploy"><i class="fa fa-check"></i><b>5.1.4</b> Scan organisation and deploy</a></li>
<li class="chapter" data-level="5.1.5" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#grant-secure-access-to-the-app"><i class="fa fa-check"></i><b>5.1.5</b> Grant secure access to the app</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#accessing-the-app"><i class="fa fa-check"></i><b>5.2</b> Accessing the app</a></li>
<li class="chapter" data-level="5.3" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#advanced-deployment"><i class="fa fa-check"></i><b>5.3</b> Advanced deployment</a><ul>
<li class="chapter" data-level="5.3.1" data-path="deploying-a-static-web-app.html"><a href="deploying-a-static-web-app.html#can-i-change-my-build"><i class="fa fa-check"></i><b>5.3.1</b> Can I change my build?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-pipelines.html"><a href="data-pipelines.html"><i class="fa fa-check"></i><b>6</b> Data pipelines</a><ul>
<li class="chapter" data-level="6.1" data-path="data-pipelines.html"><a href="data-pipelines.html#summary-1"><i class="fa fa-check"></i><b>6.1</b> Summary</a></li>
<li class="chapter" data-level="6.2" data-path="data-pipelines.html"><a href="data-pipelines.html#concepts"><i class="fa fa-check"></i><b>6.2</b> Concepts</a></li>
<li class="chapter" data-level="6.3" data-path="data-pipelines.html"><a href="data-pipelines.html#set-up-a-pipeline"><i class="fa fa-check"></i><b>6.3</b> Set up a pipeline</a><ul>
<li class="chapter" data-level="6.3.1" data-path="data-pipelines.html"><a href="data-pipelines.html#task-repository"><i class="fa fa-check"></i><b>6.3.1</b> Task repository</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-pipelines.html"><a href="data-pipelines.html#test-pipeline-in-your-own-airflow-sandbox"><i class="fa fa-check"></i><b>6.4</b> Test pipeline in your own Airflow sandbox</a><ul>
<li class="chapter" data-level="6.4.1" data-path="data-pipelines.html"><a href="data-pipelines.html#start-airflow-sandbox"><i class="fa fa-check"></i><b>6.4.1</b> Start Airflow sandbox</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-pipelines.html"><a href="data-pipelines.html#create-a-test-dag"><i class="fa fa-check"></i><b>6.4.2</b> Create a test DAG</a></li>
<li class="chapter" data-level="6.4.3" data-path="data-pipelines.html"><a href="data-pipelines.html#important-considerations"><i class="fa fa-check"></i><b>6.4.3</b> Important considerations</a></li>
<li class="chapter" data-level="6.4.4" data-path="data-pipelines.html"><a href="data-pipelines.html#test-your-image---locally-on-a-macbook"><i class="fa fa-check"></i><b>6.4.4</b> Test your image - locally on a Macbook</a></li>
<li class="chapter" data-level="6.4.5" data-path="data-pipelines.html"><a href="data-pipelines.html#build-the-image"><i class="fa fa-check"></i><b>6.4.5</b> Build the image</a></li>
<li class="chapter" data-level="6.4.6" data-path="data-pipelines.html"><a href="data-pipelines.html#airflow-dag"><i class="fa fa-check"></i><b>6.4.6</b> Airflow DAG</a></li>
<li class="chapter" data-level="6.4.7" data-path="data-pipelines.html"><a href="data-pipelines.html#airflow-web-interface"><i class="fa fa-check"></i><b>6.4.7</b> Airflow web interface</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="build-and-deploy.html"><a href="build-and-deploy.html"><i class="fa fa-check"></i><b>7</b> Build and Deploy</a><ul>
<li class="chapter" data-level="7.1" data-path="build-and-deploy.html"><a href="build-and-deploy.html#deploy.json-1"><i class="fa fa-check"></i><b>7.1</b> deploy.json</a></li>
<li class="chapter" data-level="7.2" data-path="build-and-deploy.html"><a href="build-and-deploy.html#starting-a-builddeploy"><i class="fa fa-check"></i><b>7.2</b> Starting a build/deploy</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="acceptable-use-policy.html"><a href="acceptable-use-policy.html"><i class="fa fa-check"></i><b>8</b> Acceptable use policy</a><ul>
<li class="chapter" data-level="8.1" data-path="acceptable-use-policy.html"><a href="acceptable-use-policy.html#scope"><i class="fa fa-check"></i><b>8.1</b> Scope</a></li>
<li class="chapter" data-level="8.2" data-path="acceptable-use-policy.html"><a href="acceptable-use-policy.html#who-this-policy-applies-to"><i class="fa fa-check"></i><b>8.2</b> Who this policy applies to</a></li>
<li class="chapter" data-level="8.3" data-path="acceptable-use-policy.html"><a href="acceptable-use-policy.html#general-principles"><i class="fa fa-check"></i><b>8.3</b> General principles</a></li>
<li class="chapter" data-level="8.4" data-path="github.html"><a href="github.html#github"><i class="fa fa-check"></i><b>8.4</b> GitHub</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="information-governance.html"><a href="information-governance.html"><i class="fa fa-check"></i><b>9</b> Information governance</a><ul>
<li class="chapter" data-level="9.1" data-path="information-governance.html"><a href="information-governance.html#data-management"><i class="fa fa-check"></i><b>9.1</b> Data management</a><ul>
<li class="chapter" data-level="9.1.1" data-path="information-governance.html"><a href="information-governance.html#permissions-and-access"><i class="fa fa-check"></i><b>9.1.1</b> Permissions and access</a></li>
<li class="chapter" data-level="9.1.2" data-path="information-governance.html"><a href="information-governance.html#data-retention"><i class="fa fa-check"></i><b>9.1.2</b> Data retention</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="information-governance.html"><a href="information-governance.html#data-movements"><i class="fa fa-check"></i><b>9.2</b> Data movements</a><ul>
<li class="chapter" data-level="9.2.1" data-path="information-governance.html"><a href="information-governance.html#data-movement-form"><i class="fa fa-check"></i><b>9.2.1</b> Data movement form guidance</a></li>
<li class="chapter" data-level="9.2.2" data-path="information-governance.html"><a href="information-governance.html#data-minimisation"><i class="fa fa-check"></i><b>9.2.2</b> Data Minimisation</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="information-governance.html"><a href="information-governance.html#data-offshoring"><i class="fa fa-check"></i><b>9.3</b> Data Offshoring</a></li>
<li class="chapter" data-level="9.4" data-path="information-governance.html"><a href="information-governance.html#reporting-security-incidents"><i class="fa fa-check"></i><b>9.4</b> Reporting security incidents</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="how-to-get-support.html"><a href="how-to-get-support.html"><i class="fa fa-check"></i><b>10</b> How to get Support</a><ul>
<li class="chapter" data-level="10.1" data-path="how-to-get-support.html"><a href="how-to-get-support.html#summary-2"><i class="fa fa-check"></i><b>10.1</b> Summary</a></li>
<li class="chapter" data-level="10.2" data-path="how-to-get-support.html"><a href="how-to-get-support.html#intro"><i class="fa fa-check"></i><b>10.2</b> Intro</a></li>
<li class="chapter" data-level="10.3" data-path="how-to-get-support.html"><a href="how-to-get-support.html#routes-of-support"><i class="fa fa-check"></i><b>10.3</b> Routes of Support</a><ul>
<li class="chapter" data-level="10.3.1" data-path="how-to-get-support.html"><a href="how-to-get-support.html#platform-support"><i class="fa fa-check"></i><b>10.3.1</b> Platform Support</a></li>
<li class="chapter" data-level="10.3.2" data-path="how-to-get-support.html"><a href="how-to-get-support.html#coding-support-r-python"><i class="fa fa-check"></i><b>10.3.2</b> Coding Support (R &amp; Python)</a></li>
<li class="chapter" data-level="10.3.3" data-path="how-to-get-support.html"><a href="how-to-get-support.html#git-support-version-control"><i class="fa fa-check"></i><b>10.3.3</b> Git Support (Version control)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="how-to-get-support.html"><a href="how-to-get-support.html#how-to-ask-for-support-creating-a-reproducable-example"><i class="fa fa-check"></i><b>10.4</b> How to ask for support: Creating a Reproducable Example</a></li>
<li class="chapter" data-level="10.5" data-path="how-to-get-support.html"><a href="how-to-get-support.html#raising-issues"><i class="fa fa-check"></i><b>10.5</b> Raising Issues</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html"><i class="fa fa-check"></i><b>11</b> Common Errors and Solutions</a><ul>
<li class="chapter" data-level="11.1" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#failed-to-lock-directory"><i class="fa fa-check"></i><b>11.1</b> Failed to lock directory</a></li>
<li class="chapter" data-level="11.2" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#rsession-username-error-session-hadabend"><i class="fa fa-check"></i><b>11.2</b> <code>rsession-username ERROR session hadabend</code></a></li>
<li class="chapter" data-level="11.3" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#status-code-502-error-message"><i class="fa fa-check"></i><b>11.3</b> Status Code 502 error message</a></li>
<li class="chapter" data-level="11.4" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#unable-to-access-data-using-aws.s3-package."><i class="fa fa-check"></i><b>11.4</b> Unable to access data using <code>aws.s3</code> package.</a></li>
<li class="chapter" data-level="11.5" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#s3toolss3_path_to_full_df-fails-on-excel-file"><i class="fa fa-check"></i><b>11.5</b> <code>s3tools::s3_path_to_full_df()</code> fails on Excel file</a></li>
<li class="chapter" data-level="11.6" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#two-factor-auth-issues"><i class="fa fa-check"></i><b>11.6</b> Two-factor authentication problems</a><ul>
<li class="chapter" data-level="11.6.1" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#ive-lost-my-platform-2fa"><i class="fa fa-check"></i><b>11.6.1</b> I’ve lost my platform 2FA</a></li>
<li class="chapter" data-level="11.6.2" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#i-have-entered-my-2fa-code-but-the-platform-will-not-accept-it"><i class="fa fa-check"></i><b>11.6.2</b> I have entered my 2FA code, but the platform will not accept it</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="common-errors-and-solutions.html"><a href="common-errors-and-solutions.html#im-having-problems-deploying-a-shiny-app"><i class="fa fa-check"></i><b>11.7</b> I’m having problems deploying a Shiny app</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="annexes.html"><a href="annexes.html"><i class="fa fa-check"></i><b>12</b> Annexes</a><ul>
<li class="chapter" data-level="12.1" data-path="annexes.html"><a href="annexes.html#memory-limits"><i class="fa fa-check"></i><b>12.1</b> Memory limits</a></li>
<li class="chapter" data-level="12.2" data-path="annexes.html"><a href="annexes.html#what-are-the-benefits-of-github-and-why-do-we-recommend-it"><i class="fa fa-check"></i><b>12.2</b> What are the benefits of Github and why do we recommend it?</a></li>
<li class="chapter" data-level="12.3" data-path="annexes.html"><a href="annexes.html#step-by-step-guide-to-setup-two-factor-authentication"><i class="fa fa-check"></i><b>12.3</b> Step by step guide to setup Two Factor Authentication</a><ul>
<li class="chapter" data-level="12.3.1" data-path="annexes.html"><a href="annexes.html#step-by-step---logging-into-the-platform-for-the-first-time"><i class="fa fa-check"></i><b>12.3.1</b> Step by step - logging into the platform for the first time</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="annexes.html"><a href="annexes.html#data-minimisation-1"><i class="fa fa-check"></i><b>12.4</b> Data Minimisation</a><ul>
<li class="chapter" data-level="12.4.1" data-path="annexes.html"><a href="annexes.html#pseudonymisation"><i class="fa fa-check"></i><b>12.4.1</b> Pseudonymisation</a></li>
<li class="chapter" data-level="12.4.2" data-path="annexes.html"><a href="annexes.html#anonymisation"><i class="fa fa-check"></i><b>12.4.2</b> Anonymisation</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="conda-package-management.html"><a href="conda-package-management.html"><i class="fa fa-check"></i><b>A</b> Conda Package Management</a><ul>
<li class="chapter" data-level="A.1" data-path="conda-package-management.html"><a href="conda-package-management.html#unified-package-management-for-both-r-and-python"><i class="fa fa-check"></i><b>A.1</b> Unified package management for both R and Python</a><ul>
<li class="chapter" data-level="A.1.1" data-path="conda-package-management.html"><a href="conda-package-management.html#faster-builds"><i class="fa fa-check"></i><b>A.1.1</b> Faster builds</a></li>
<li class="chapter" data-level="A.1.2" data-path="conda-package-management.html"><a href="conda-package-management.html#cross-language"><i class="fa fa-check"></i><b>A.1.2</b> Cross Language</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="conda-package-management.html"><a href="conda-package-management.html#installing-packages"><i class="fa fa-check"></i><b>A.2</b> Installing Packages</a><ul>
<li class="chapter" data-level="A.2.1" data-path="conda-package-management.html"><a href="conda-package-management.html#r"><i class="fa fa-check"></i><b>A.2.1</b> R</a></li>
<li class="chapter" data-level="A.2.2" data-path="conda-package-management.html"><a href="conda-package-management.html#python"><i class="fa fa-check"></i><b>A.2.2</b> Python</a></li>
<li class="chapter" data-level="A.2.3" data-path="conda-package-management.html"><a href="conda-package-management.html#operating-system-packages"><i class="fa fa-check"></i><b>A.2.3</b> Operating System Packages</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="conda-package-management.html"><a href="conda-package-management.html#platform-limitations"><i class="fa fa-check"></i><b>A.3</b> Platform limitations</a></li>
<li class="chapter" data-level="A.4" data-path="conda-package-management.html"><a href="conda-package-management.html#environment-management"><i class="fa fa-check"></i><b>A.4</b> Environment Management</a><ul>
<li class="chapter" data-level="A.4.1" data-path="conda-package-management.html"><a href="conda-package-management.html#reset-your-environment-to-default"><i class="fa fa-check"></i><b>A.4.1</b> Reset your <em>Environment</em> to default</a></li>
<li class="chapter" data-level="A.4.2" data-path="conda-package-management.html"><a href="conda-package-management.html#exporting-your-environment"><i class="fa fa-check"></i><b>A.4.2</b> Exporting your <em>Environment</em></a></li>
<li class="chapter" data-level="A.4.3" data-path="conda-package-management.html"><a href="conda-package-management.html#making-your-r-studio-environment-match-an-environment.yml"><i class="fa fa-check"></i><b>A.4.3</b> Making your R Studio Environment match an <code>environment.yml</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="access-local-ports-in-jupyter.html"><a href="access-local-ports-in-jupyter.html"><i class="fa fa-check"></i><b>B</b> Access Local Ports in Jupyter</a><ul>
<li class="chapter" data-level="B.1" data-path="access-local-ports-in-jupyter.html"><a href="access-local-ports-in-jupyter.html#running-plotly-dash-apps"><i class="fa fa-check"></i><b>B.1</b> Running Plotly <a href="https://dash.plot.ly/">Dash</a> apps</a><ul>
<li class="chapter" data-level="B.1.1" data-path="access-local-ports-in-jupyter.html"><a href="access-local-ports-in-jupyter.html#install-dependencies"><i class="fa fa-check"></i><b>B.1.1</b> Install dependencies</a></li>
<li class="chapter" data-level="B.1.2" data-path="access-local-ports-in-jupyter.html"><a href="access-local-ports-in-jupyter.html#example-code"><i class="fa fa-check"></i><b>B.1.2</b> Example code</a></li>
<li class="chapter" data-level="B.1.3" data-path="access-local-ports-in-jupyter.html"><a href="access-local-ports-in-jupyter.html#run-server-from-the-terminal"><i class="fa fa-check"></i><b>B.1.3</b> Run server from the terminal</a></li>
<li class="chapter" data-level="B.1.4" data-path="access-local-ports-in-jupyter.html"><a href="access-local-ports-in-jupyter.html#access-via-_tunnel_-url"><i class="fa fa-check"></i><b>B.1.4</b> Access via <code>_tunnel_</code> URL</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="access-local-ports-in-jupyter.html"><a href="access-local-ports-in-jupyter.html#troubleshooting-1"><i class="fa fa-check"></i><b>B.2</b> Troubleshooting</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analytical Platform User Guidance</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="deploying-an-r-shiny-app" class="section level1">
<h1><span class="header-section-number">Part 4</span> Deploying an R Shiny app</h1>
<div id="basic-deployment" class="section level2">
<h2><span class="header-section-number">4.1</span> Basic deployment</h2>
<div id="summary" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Summary</h3>
<p>To create and deploy a Shiny app, you should complete the following steps:</p>
<ol style="list-style-type: decimal">
<li><a href="deploying-an-r-shiny-app.html#copy-template">Copy the app template</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#create-webapp">Create a new webapp</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#clone-repo">Clone the repository</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#develop-the-app">Develop the app</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#manage-dependencies">Manage dependencies</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#rshiny-deploy">Set access permissions</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#create-release">Create a release in GitHub</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#deploy-in-concourse">Deploy in Concourse</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#add-users">Add users to the app</a>.</li>
<li><a href="deploying-an-r-shiny-app.html#access-the-app">Access the app</a>.</li>
</ol>
</div>
<div id="copy-template" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Copy the app template</h3>
<p>To copy the app template:</p>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://github.com/new/import">github.com/new/import</a>.</li>
<li>Fill in the form:
<ul>
<li>Your old repository’s clone URL: <code>https://github.com/moj-analytical-services/rshiny-template</code></li>
<li>Owner: <code>moj-analytical-services</code></li>
<li>Name: The name of your app, e.g., <code>my-app</code></li>
<li>Privacy: Private</li>
</ul></li>
<li>Select <strong>Begin import</strong>.</li>
</ol>
<p>This copies the entire contents of the app template to a new repository.</p>
<div class="figure">
<img src="images/shiny/copy-template.png" />

</div>
</div>
<div id="create-webapp" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Create a new webapp</h3>
<p>Standard users are not able to create new webapps or webapp data sources themselves.</p>
<p>To create a new webapp or webapp data source, ask the Analytical Platform team on the <a href="https://asdslack.slack.com/messages/CBLAGCQG6/">#ap_admin_request</a> Slack channel or by <a href="mailto:analytical_platform@digital.justice.gov.uk">email</a>, if you are a Quantum user.</p>
<p>You should provide the URL of the app’s GitHub repository as well as any existing webapp data sources it should be connected to.</p>
</div>
<div id="clone-repo" class="section level3">
<h3><span class="header-section-number">4.1.4</span> Clone the repository</h3>
<p>To clone the repository:</p>
<ol style="list-style-type: decimal">
<li>Navigate to the app’s repository on GitHub.</li>
<li>Select <strong>Clone or download</strong>.</li>
<li>Ensure that the dialogue says ‘Clone with SSH’. If the dialogue says ‘Clone with HTTPS’ select <strong>Use SSH</strong>.</li>
<li>Copy the SSH URL. This should start with <code>git@</code>.</li>
<li>In RStudio, select <strong>File</strong> &gt; <strong>New project…</strong> &gt; <strong>Version control</strong> &gt; <strong>Git</strong>.</li>
<li>Paste the SSH URL in the <strong>Repository URL</strong> field.</li>
<li>Select <strong>Create Project</strong>.</li>
</ol>
<div class="figure">
<img src="images/shiny/ssh-key.png" />

</div>
</div>
<div id="develop-the-app" class="section level3">
<h3><span class="header-section-number">4.1.5</span> Develop the app</h3>
<p>Develop the app in RStudio.</p>
<p>Your app can take one of several forms:</p>
<ol style="list-style-type: decimal">
<li>A directory containing <code>server.R</code>, plus, either <code>ui.R</code> or a www directory that contains the file <code>index.html</code>.</li>
<li>A directory containing <code>app.R</code>.</li>
<li>An <code>.R</code> file containing an R Shiny application, ending with an expression that produces an R Shiny app object.</li>
<li>A list with <code>ui</code> and <code>server</code> components.</li>
<li>an R Shiny app object created by <code>shinyApp</code>.</li>
</ol>
<p>By default, the template contains <code>server.R</code> and <code>ui.R</code> files, however, you may wish to take a different approach depending on your requirements. For example, using <code>app.R</code>, it is possible to deploy R Shiny apps from within a package, as <a href="https://github.com/RobinL/costmodelr/blob/b328902026bd1cce5d17b487e310c59725ea4d62/R/shiny_explorer.r#L20">here</a>.</p>
</div>
<div id="manage-dependencies" class="section level3">
<h3><span class="header-section-number">4.1.6</span> Manage dependencies</h3>
<p>Most apps will have dependencies on various third-party packages (e.g., <code>dplyr</code>). These packages change through time and may not always be backwards compatible. To avoid compatibility issues and ensure reproducible outputs, it is necessary to use a package management system, such as packrat or Conda.</p>
<p>If using packrat, ensure that it is enabled for your project in RStudio.</p>
<p>To enable packrat, select <strong>Tools</strong> &gt; <strong>Project Options…</strong> &gt; <strong>Packrat</strong> &gt; <strong>Use packrat with this project</strong>.</p>
<p>When packrat is enabled, run <code>packrat::snapshot()</code> to generate a list of packages used in the project, their sources and their current versions.</p>
<p>You may also wish to run <code>packrat::clean()</code> to remove unused packages from the list.</p>
<p>The list is stored in a file called <code>packrat/packrat.lock</code>. You must ensure that you have committed this file to GitHub before deploying your app.</p>
</div>
<div id="rshiny-deploy" class="section level3">
<h3><span class="header-section-number">4.1.7</span> Set access permissions</h3>
<p>You can set some access permissions for your app in the <code>deploy.json</code> file that is included with the app template. This file is used by Concourse to detect apps that are ready to build and deploy.</p>
<p>The <code>allowed_ip_ranges</code> parameter controls where your app can be accessed from. It can take any combination of the following values <code>[&quot;DOM1&quot;, &quot;QUANTUM&quot;, &quot;102PF Wifi&quot;]</code> or <code>[&quot;Any&quot;]</code>.</p>
<p>The <code>disable_authentication</code> parameter controls whether sign-in (using a link or one-time passcode sent to an authorised email address) is required for users to access the app. It can take the values <code>true</code> or <code>false</code>. In general, this should be set to <code>false</code>.</p>
<p>When <code>disable_authentication</code> is set to <code>true</code>, users do not need to go through a sign-in process but can still only access an app using a system specified in <code>allowed_ip_ranges</code>. This is a relatively weak security measure, as discussed <a href="https://ministryofjustice.github.io/security-guidance/standards/authentication/#ip-addresses">here</a>. As such, if you wish to disable authentication, you should first discuss this with the Analytical Platform team.</p>
</div>
<div id="create-release" class="section level3">
<h3><span class="header-section-number">4.1.8</span> Create a release in GitHub</h3>
<p>When you’re ready to share your app, you should create a release in GitHub. When you create a release, this is detected by Concourse, which will automatically begin the build/deploy process for your app. Each time you create a new release, Concourse will create a new build.</p>
<p>To create a release in GitHub:</p>
<ol style="list-style-type: decimal">
<li>Navigate to the app’s repository.</li>
<li>Select <strong>release</strong> &gt; <strong>Draft a new release</strong>.</li>
<li>Choose a tag version for the release – GitHub provides tagging suggestions at the right of the screen that we advise you to follow.</li>
<li>Choose a title for the release.</li>
<li>Describe the contents of the release.</li>
<li>Select <strong>Publish release</strong>.</li>
</ol>
</div>
<div id="deploy-in-concourse" class="section level3">
<h3><span class="header-section-number">4.1.9</span> Deploy in Concourse</h3>
<p>Once you have created a release in GitHub, Concourse should automatically start to deploy your app within a few minutes.</p>
<p>If your app does not deploy automatically, you should first check that the pipeline is not paused.</p>
<p>If the app still does not deploy automatically, you can manually trigger a build by pressing the <code>+</code> icon in the top right corner of Concourse.</p>
<p>For more information about using Concourse, see Section <a href="build-and-deploy.html#build-and-deploy">7</a>.</p>
</div>
<div id="add-users" class="section level3">
<h3><span class="header-section-number">4.1.10</span> Add users to the app</h3>
<p>If <code>disable_authentication</code> is set to <code>false</code> in the <code>deploy.json</code> file, access to the app will be controlled by email address. You can ask the Analytical Platform team to add or remove users to the access list on the <a href="https://asdslack.slack.com/messages/CBLAGCQG6/">#ap_admin_request</a> Slack channel or by <a href="mailto:analytical_platform@digital.justice.gov.uk">email</a>, if you are a Quantum user.</p>
</div>
<div id="access-the-app" class="section level3">
<h3><span class="header-section-number">4.1.11</span> Access the app</h3>
<p>Your deployed app can be accessed at <code>repository-name.apps.alpha.mojanalytics.xyz</code>, where <code>repository-name</code> is the name of the relevant GitHub repository.</p>
<p>If the repository name contains underscores, these will be converted to dashes in the app URL. For example, an app with a repository called <code>repository_name</code> would have the URL <code>repository-name.apps.alpha.mojanalytics.xyz</code>.</p>
<p>When accessing an app, you can choose whether to sign in using an email link (default) or a one-time passcode. To sign in with a one-time passcode, add <code>/login?method=code</code> to the end of the app’s URL e.g. <a href="https://kpi-s3-proxy.apps.alpha.mojanalytics.xyz/login?method=code" class="uri">https://kpi-s3-proxy.apps.alpha.mojanalytics.xyz/login?method=code</a>. (This requires the app to have been deployed since the auth-proxy <a href="https://github.com/ministryofjustice/analytics-platform-auth-proxy/releases/tag/v0.1.8">release on 30/1/19</a>.)</p>
</div>
</div>
<div id="advanced" class="section level2">
<h2><span class="header-section-number">4.2</span> Advanced</h2>
<div id="editing-the-dockerfile" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Editing the Dockerfile</h3>
<p>A <code>Dockerfile</code> is a text document that contains all the commands a user could call on the command line to assemble an image.</p>
<p>In most cases, you will not need to change the <code>Dockerfile</code> when deploying your app.</p>
<p>If your app uses packages that have additional system dependencies, you will need to add these in the <code>Dockerfile</code>. If you are unsure how to do this, contact the Analytical Platform team.</p>
<p>A <code>Dockerfile</code> reference can be found <a href="https://docs.docker.com/engine/reference/builder/">here</a>.</p>
</div>
<div id="getting-the-current-user-of-the-app" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Getting the current user of the app</h3>
<p>A Shiny app can find out who is using it. This can be useful to log an audit trail of significant events. Specifically it can determine the email address that the user logged into the app with. (Obviously this is sensitive data and needs data protection concerns looking after - e.g. proportionate, transparent, consent, secure etc).</p>
<p>See the example: <a href="https://github.com/moj-analytical-services/shiny-headers-demo" class="uri">https://github.com/moj-analytical-services/shiny-headers-demo</a></p>
</div>
</div>
<div id="troubleshooting" class="section level2">
<h2><span class="header-section-number">4.3</span> Troubleshooting</h2>
<div id="common-errors" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Common errors</h3>
<p>Sometimes, an R Shiny app can deploy successfully but result in the following error:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">An</span> error has occurred
<span class="ex">The</span> application failed to start

<span class="ex">The</span> application exited during initialization</code></pre></div>
<p>This is generic error that means there is an error in your R code or there are missing packages.</p>
<p>To try to fix this you should:</p>
<ul>
<li>explicitly reference all third-party packages using the double colon operator (i.e. use <code>shiny::hr()</code> as opposed to <code>hr()</code>)</li>
<li>ensure that you have called <code>packrat::snapshot()</code> and committed <code>packrat.lock</code> to GitHub, if using <code>packrat</code></li>
</ul>
<p>In general, it is also good practice to:</p>
<ul>
<li>minimise the number of packages you use in your project</li>
<li>test your app early and often</li>
<li>test using a cloned copy of the app’s repository to avoid issues arising as a result of uncomitted local changes</li>
</ul>
</div>
<div id="app-sign-in" class="section level3">
<h3><span class="header-section-number">4.3.2</span> App sign-in</h3>
<p>Some anti-virus software and spam filters pre-click links in emails, meaning that app sign-in links do work. In this case, you should sign in using a one-time passcode, as described in Section <a href="deploying-an-r-shiny-app.html#access-the-app">4.1.11</a>.</p>
</div>
<div id="packrat" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Packrat</h3>
<p>If you are having issues with <code>packrat.lock</code>, follow the steps below:</p>
<ol style="list-style-type: decimal">
<li>Delete the entire <code>packrat</code> directory.</li>
<li>Comment out all code in the project.</li>
<li>Enable packrat using <code>packrat::init()</code>.</li>
<li>Capture all package dependencies using <code>packrat::snapshot()</code>.</li>
<li>Uncomment all code in the project and install package dependencies one by one.</li>
<li>Rerun <code>packrat::snapshot()</code>.</li>
<li>Redeploy the app.</li>
</ol>
</div>
<div id="kibana" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Kibana</h3>
<p>All logs from deployed apps can be viewed in <a href="https://kibana.services.alpha.mojanalytics.xyz">Kibana</a>.</p>
<p>To view all app logs:</p>
<ol style="list-style-type: decimal">
<li>Select <strong>Discover</strong> from the left sidebar.</li>
<li>Select <strong>Open</strong> from the menu bar.</li>
<li>Select <strong>Application logs (alpha)</strong> from the saved searches.</li>
</ol>
<p>To view the logs for a specific app:</p>
<ol style="list-style-type: decimal">
<li>Select <strong>Add a filter</strong>.</li>
<li>Select <strong>app_name</strong> as the field.</li>
<li>Select <strong>is</strong> as the operator.</li>
<li>Insert the app name followed by ‘-webapp’ as the value.</li>
<li>Select <strong>Save</strong>.</li>
</ol>
<p>Log messages are displayed in the <strong>message</strong> column.</p>
<p>By default, Kibana only shows logs for the last 15 minutes. If no logs are available for that time range, you will receive the warning ‘No results match your search criteria’.</p>
<p>To change the time range, select the clock icon in the menu bar. There are several presets or you can define a custom time range.</p>
<p>Kibana also has experimental autocomplete and simple syntax tools that you can use to build custom searches. To enable these features, select <strong>Options</strong>_ from within the search bar, then toggle <strong>Turn on query features</strong>.</p>
</div>
<div id="deploying-locally" class="section level3">
<h3><span class="header-section-number">4.3.5</span> Deploying locally</h3>
<p>If you have a MacBook, you can use Docker locally to test and troubleshoot your R Shiny app. You can download Docker Desktop for Mac <a href="https://hub.docker.com/editions/community/docker-ce-desktop-mac">here</a>.</p>
<p>To build and run your R Shiny app locally, follow the steps below:</p>
<ol style="list-style-type: decimal">
<li>Clone your app’s repository to a new folder on your MacBook – this guarantees that the app will be built using the same code as on the Analytical Platform.</li>
<li>Open a terminal session and navigate to the directory containing the <code>Dockerfile</code> using the <code>cd</code> command.</li>
<li><p>Build the Docker image by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">docker</span> build . -t <span class="op">&lt;</span>image tag<span class="op">&gt;</span></code></pre></div>
where <code>image tag</code> is a tag you want to give the image.</li>
<li><p>Run a Docker container created from the Docker image by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">docker</span> run -p 80:80 <span class="op">&lt;</span>image tag<span class="op">&gt;</span></code></pre></div></li>
<li><p>Go to <a href="127.0.0.1:80" class="uri">127.0.0.1:80</a> to view the app.</p></li>
</ol>
<p>If the app does not work, follow the steps below to troubleshoot it:</p>
<ol style="list-style-type: decimal">
<li><p>Start a bash session in a Docker container created from the Docker image by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">docker</span> run -it -p 80:80 <span class="op">&lt;</span>image tag<span class="op">&gt;</span> bash</code></pre></div></li>
<li><p>Install the <code>nano</code> text editor by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">apt-get</span> update
<span class="ex">apt-get</span> install nano</code></pre></div></li>
<li><p>Open <code>shiny-server.conf</code> in the <code>nano</code> text editor by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">nano</span> /etc/shiny-server/shiny-server.conf</code></pre></div></li>
<li><p>Add the following lines at the beginning of <code>shiny-server.conf</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">access_log</span> /var/log/shiny-server/access.log tiny<span class="kw">;</span>
<span class="ex">preserve_logs</span> true<span class="kw">;</span></code></pre></div></li>
<li>Write the changes by pressing <code>Ctrl+O</code>.</li>
<li>Exit the <code>nano</code> text editor by pressing <code>Ctrl+X</code>.</li>
<li><p>Increase the verbosity of logging and start the Shiny server by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">export</span> <span class="va">SHINY_LOG_LEVEL=</span>TRACE
<span class="ex">/bin/shiny-server.sh</span></code></pre></div></li>
<li>Open a new terminal session.</li>
<li><p>Start a new bash session in the Docker container by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">docker</span> exec -it <span class="op">&lt;</span>CONTAINER ID<span class="op">&gt;</span> bash</code></pre></div>
You can find the <code>CONTAINER ID</code> by running <code>docker ps</code>.</li>
<li><p>View the logs by running:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cat</span> /var/log/shiny-server/access.log</code></pre></div></li>
</ol>
<p>For further details, see the <a href="https://docs.rstudio.com/shiny-server/">Shiny server documentation</a>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="github.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="deploying-a-static-web-app.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
